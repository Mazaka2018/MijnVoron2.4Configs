# DOCUMENT FROM : https://github.com/Klipper3d/klipper/blob/master/config/generic-bigtreetech-octopus-pro-v1.0.cfg
# settings used by consulting: https://github.com/bigtreetech/BIGTREETECH-OCTOPUS-V1.0/tree/master/Firmware/Klipper (also for PRO)
# PIN DIAGRAM FOR OCTOPUS PRO 1.0 (and apparently 1.01): https://github.com/GadgetAngel/BTT_Octopus_Color_PIN_Diagram/blob/main/BTT_Octopus_Pro_V1.0_Color_PIN_Diagram/BTT-Octopus-Pro-V1.0-Color-PIN-V4.0.pdf

# kijk ook hier, wel ouder document: https://docs.vorondesign.com/build/electrical/v2_octopus_wiring.html



# This file contains common pin mappings for the BigTreeTech Octopus
# Pro v1.0 board.

#------------------------------
# I have an OCTOPUS PRO 1.01
# PROD DATE: 11-2023
#------------------------------

# Important! Do not use this config with an Octopus Pro v1.1 board as
# doing so could result in a heater being inadvertently enabled.

# To use this config, start by identifying the micro-controller on the
# board - it may be an STM32F446, STM32F429, or an STM32H723.  

#------------------------------
# I have on board the chip
# STM32F446ZETb
# ARM AA152VQ
# TWN AA 220
#	20
#------------------------------


# Select
# the appropriate micro-controller in "make menuconfig" and select
# "Enable low-level configuration options". 
# For STM32F446 boards the firmware should be compiled with a "32KiB 
# bootloader" and a "12MHz crystal" clock reference. 


#####################################################################
#####################################################################
# my klipper printer.cfg for the OCTOPUS PRO 1.01 starts here.
#####################################################################
#####################################################################

[include mainsail.cfg]
[include config_backup.cfg]

[include NozzleScrub.cfg]
#[include lcd_tweaks.cfg]
[include stealthburner_leds.cfg]

[include KAMP_Settings.cfg]

[include homing.cfg]

[include K-ShakeTune/*.cfg]

#enable object exclusion
[exclude_object]

[virtual_sdcard]
path: /home/tiren/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu]
# serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_200035000851313133353932-if00
canbus_uuid: 403544310df5


# Found canbus_uuid=403544310df5, Application: Klipper - OCTOPUS PRO 1.01
# Found canbus_uuid=a74fbb9bdf70, Application: Klipper - CARTOGRAPHER v3
# Found canbus_uuid=21c36fa97c26, Application: Klipper - SB2209 RP2040

#Found canbus_uuid=403544310df5, Application: Klipper - Octopus Bridge 
#Found canbus_uuid=955545f3a153, Application: Klipper - Karto v2
#Found canbus_uuid=21c36fa97c26, Application: Klipper - SB2209
#Total 3 uuids found


[include sbb2209can.cfg]
# hierin zit alle definities voor de sbb2209 rp2040 PCB header met...
# extruder stepper
# PCF- parts cooling fan
# HEF- heater fan
# Hotend thermistor (rapido PT1000)
# Hotend Heater
# stealthburner LEDS

[cartographer]
#canbus_uuid: 955545f3a153 # v2 (the IDM)
x_offset: 0. #   X offset of cartographer from the nozzle
y_offset: 21.1 #   Y offset of cartographer from the nozzle.
mesh_main_direction: x #   Primary travel direction during mesh measurement. 
mesh_runs: 2 #   Number of passes to make during mesh scan.


canbus_uuid: bd673f67e4d1 # portuguese v3 carto

# canbus_uuid: a74fbb9bdf70 # (v3 the Carto)

# canbus_uuid: 8c9f07b980a3 #(v3 van usb 2 can carto van porto)

speed: 40 # 5 #   Z probing dive speed. was 5. ophogen naar 20? 15 is perfect for IDM 40 is ECHT LUID! TAAAK
lift_speed:80 # oorspronkelijk is dit maar 5... 20 gaat ook prima. 30 is net lekkerder.
backlash_comp: 0.009
trigger_distance: 2. #   cartographer trigger distance for homing.
trigger_dive_threshold: 1.5 #   Threshold for range vs dive mode probing. Beyond `trigger_distance + trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006 #   Hysteresis on trigger threshold for untriggering, as a percentage of the trigger threshold.
cal_nozzle_z: 0.1 #   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1 #   Minimum z bound on sensor response measurement.
cal_ceil:5. #   Maximum z bound on sensor response measurement.
cal_speed: 1.0 #   Speed while measuring response curve.
cal_move_speed: 20 #   Speed while moving to position for response curve measurement.
default_model_name: default #   Name of default cartographer model to load.
#mesh_overscan: -1 #   Distance to use for direction changes at mesh line ends. Omit this setting and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1 #   Radius of mesh grid point clusters.

# tc_a_a:-2.4451981384116557e-05
# tc_a_b:1.4612030261755649
# tc_b_a:0.0032856515232762206
# tc_b_b:-254.99975730959818



# hier staat wat over lis2dw: https://github.com/Klipper3d/klipper/blob/master/docs/Measuring_Resonances.md

#[lis2dw]
#cs_pin: cartographer:PA3
#spi_bus: spi1

#[resonance_tester]
#accel_chip: lis2dw
#probe_points: 
#  175, 175, 20


# ACCELEROMETER_QUERY
# MEASURE_AXES_NOISE 
# TEST_RESONANCES AXIS=X
# TEST_RESONANCES AXIS=Y
# ~/klipper/scripts/calibrate_shaper.py /tmp/resonances_x_*.csv -o /tmp/shaper_calibrate_x.png
# ~/klipper/scripts/calibrate_shaper.py /tmp/resonances_y_*.csv -o /tmp/shaper_calibrate_y.png
# then add the suggested value from created images here in printer.cfg
#[input_shaper]
#shaper_freq_x: ...
#shaper_type_x: ...
#shaper_freq_y: 34.6
#shaper_type_y: mzv
# OFFFFFFF.... https://github.com/Klipper3d/klipper/blob/master/docs/Measuring_Resonances.md
# SHAPER_CALIBRATE
# en save_config
# 

#[printer]
# Note that alternatively you can run the input shaper auto-calibration from Klipper directly, which can be convenient, for example, for the input shaper re-calibration.
#https://all3dp.com/2/klipper-input-shaping-simply-explained/


#When there is vibration on every shapper like there is on this graph with even 3humpei having 10% vibration it will always just say zv because it cant compensate for w/e vibrations are there
#I would do the TEST_RESONANCES to check your belts

# hier advies van een ander
#TEST_RESONANCES AXIS=1,1 OUTPUT=raw_data
#TEST_RESONANCES AXIS=1,-1 OUTPUT=raw_data
#~/klipper/scripts/graph_accelerometer.py -c /tmp/raw_data_axis*.csv -o /tmp/resonances.png
##--------------------------------------------------------------------

[printer]
kinematics: corexy

#max_velocity: 1000
#max_accel: 10000

max_velocity: 600
max_accel: 17000

;of
;#max_velocity: 300
;#max_accel: 30000

;of werkt prima
;max_velocity: 350
;max_accel: 33000


#max_velocity: 600
#max_accel: 20000

#max_velocity: 800
#max_accel: 12000

#max_velocity: 800
#max_accel: 8000


# max_velocity: 300 & max_accel: 34000
# max_velocity: 400 & max_accel: 29000
# max_velocity: 500 & max_accel: 26000
# max_velocity: 600 & max_accel: 21000
# max velocity: 700 & max_accel: 15000
# max_velocity: 800 & max_accel: 12000 zelfs 14000 gaat heel goed. als de kamer warm is.


max_z_velocity: 15
max_z_accel: 500 
square_corner_velocity: 5
# square_corner_velocity: 10

## [auto_speed]

#####################################################################
# 	X/Y Stepper Settings
#####################################################################

## X Stepper on MOTOR0(B Motor) DRIVER 0
[stepper_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper

# veranderen voor sensorless
# endstop_pin: PG6
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_speed: 80 # had op 200 # was 40 met sensorless... ben beetje zata dat trage...
homing_retract_dist: 0 # was 5

position_min: 0
position_endstop: 350
position_max: 350
homing_positive_dir: true

[tmc2209 stepper_x]
uart_pin: PC4
interpolate: True
run_current: 0.8
# hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 0
#extra deel voor sensorless
diag_pin: ^PG6
driver_SGTHRS: 95

[stepper_y]
## Y Stepper on MOTOR1 (A Motor) DRIVER 1
step_pin: PG0
dir_pin: !PG1 
enable_pin: !PF15
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  
# sensorless
# endstop_pin: PG9
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_speed: 40 # had op 40. maar zo traag met sensorless
homing_retract_dist:0

position_min: 0
position_endstop: 350
position_max: 350
homing_positive_dir: true

[tmc2209 stepper_y]
uart_pin: PD11
interpolate: True
run_current: 0.8
# hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 0
#sensorless
diag_pin: ^PG9
driver_SGTHRS: 105


#####################################################################
# 	Z Stepper Settings
#####################################################################

## Z0 Stepper - Front Left on MOTOR2_1 -- DRIVER 2
[stepper_z]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16
## endstop_pin: probe:z_virtual_endstop ## dit is voor de TAP
# onderste nodig voor de sexbolt
# endstop_pin: PG10
# position_endstop: -5
#    G1 X232 Y348 F15000

#Cartographer is nieuwe z endstop
endstop_pin: probe:z_virtual_endstop # use cartographer as virtual endstop
homing_retract_dist: 0 # cartographer needs this to be set to 0




position_max: 300
position_min: -5
homing_speed: 5 # 5 # was 15, maar dat geeft zon TOK
second_homing_speed: 3 
# homing_retract_dist: 3
[tmc2209 stepper_z]
uart_pin: PC6
interpolate: true
run_current: 0.8
# hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z1 Stepper - Rear Left on MOTOR3 -- DRIVER 3
[stepper_z1]
step_pin: PG4
dir_pin: PC1
enable_pin: !PA0 # niet !PA2, dit is  voor de 1.1 octopus pro
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16
[tmc2209 stepper_z1]
uart_pin: PC7
interpolate: true
run_current: 0.8
# hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0


##	Z2 Stepper - Rear Right on MOTOR4 -- DRIVER 4
[stepper_z2]
step_pin: PF9
dir_pin: !PF10
enable_pin: !PG2
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16
[tmc2209 stepper_z2]
uart_pin: PF2
interpolate: true
run_current: 0.8
# hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z3 Stepper - Front Right on MOTOR5 -- DRIVER 5
[stepper_z3]
step_pin: PC13
dir_pin: PF0
enable_pin: !PF1
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16
[tmc2209 stepper_z3]
uart_pin: PE4
interpolate: true
run_current: 0.8
#hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 0


#####################################################################
# 	Extruder
#####################################################################

[extruder]
step_pin: EBBCan:gpio18
dir_pin: !EBBCan:gpio19
enable_pin: !EBBCan:gpio17

#Ellis... 
# M83
# G1 E100 F60
# gemarkeerd 120mm. Overgebleven is: 20. dus NIKS VERANDEREN. Anders: <new_rotation_distance> = <previous_rotation_distance> * ( <actual_extrude_distance> / 100 )

rotation_distance: 13.6073700

gear_ratio: 50:17				#BMG Gear Ratio
microsteps: 32			
full_steps_per_rotation: 200




#Pressure_advance: 0.022 # ABS wit... geell

pressure_advance: 0.020 # ABS zwart 
#pressure_advance: 0.022 # ABS blue GEETECH
#pressure_advance: 0.030 #ABS WIT KINGROON
#pressure_advance: 0.040 #abs rood 

pressure_advance_smooth_time: 0.040
max_extrude_cross_section: 50.0
filament_diameter: 1.75
nozzle_diameter: 0.4
max_extrude_only_distance: 300 


## THE PHAETUS RAPIDO

heater_pin: EBBCan:gpio7
sensor_pin: EBBCan:gpio27
#sensor_type: PT1000
sensor_type: ATC Semitec 104NT-4-R025H42G
min_extrude_temp: 170
min_temp: 0
max_temp: 350
#min_temp: -270
#max_temp: 99999999
max_power: 1.0
#control: pid
#pid_Kp: 22.409
#pid_Ki: 1.423
#pid_Kd: 88.235




#	E0 on MOTOR6 -- DRIVER 6

# dit is nu op de PCB CAN board (EBB2209)
# [extruder]
# step_pin: PE2
# dir_pin: !PE3
# enable_pin: !PD4
# max_extrude_only_distance: 300 # dit betekent - mag 300mm filament in een keer uitpoepen. zoals bij test op https://hotend-flow-tester.netlify.app/
#############################################################
#############################################################

## tuning ellis temp ## max_extrude_only_distance: 150
# https://ellis3dp.com/Print-Tuning-Guide/articles/extruder_calibration.html
#max_extrude_only_distance: 300 # dit betekent - mag 300mm filament in een keer uitpoepen. zoals bij test op https://hotend-flow-tester.netlify.app/

## rotation_distance: 13.3805811‬	#Bondtech 5mm Drive Gears
#gear_ratio: 50:17				#BMG Gear Ratio
#microsteps: 64
#full_steps_per_rotation: 200	#200 for 1.8 degree, 400 for 0.9 degree
##      In E0 OUT Position
##pressure_advance: 0.0425 # 0.0425 (beste naad bij 13 mm 13x0.0025) volgens de cube met fysetc motor and zelf gebouwd extruder
## gemeten met de lijnen test naar.... 0.055... dus dan zou .... x * 0.0025 = 0.055 --> x = 0.055/0.0025 --> x= 22mm

#pressure_advance: 0.055   # deze is voor COLIDO WIT
#pressure_advance: 0.0445   # deze is voor GEETECH BLUE
#pressure_advance: 0.050     # deze is standaard

#pressure_advance_smooth_time: 0.040
#max_extrude_cross_section: 50.0
#####################################################################
#####################################################################

# rotation_distance: 13.6073700 # was voor witte extruder
# rotation_distance: 12.5187804

# gear_ratio: 50:17				#BMG Gear Ratio
# microsteps: 16			
# full_steps_per_rotation: 200


#pressure_advance: 0.055
# pressure_advance: 0.054 # voor ABS ZWART
# pressure_advance_smooth_time: 0.040
# max_extrude_cross_section: 50.0
# filament_diameter: 1.75
# nozzle_diameter: 0.4



# PA3, HE1 heb ik gebruikt voor de kabels voor de NEVERMORE
#heater_pin: PA3 # HE1
#sensor_pin: PF5 # T1

#PB10, HE2 heb ik gebruikt voor de bed fans.
#heater_pin: PB10 # HE2
#sensor_pin: PF6 # T2

#heater_pin: PB11 # HE3
#sensor_pin: PF7 # T3


#[tmc2209 extruder]
#uart_pin: PE1
#interpolate: false
#run_current: 0.5
#hold_current: 0.4
#sense_resistor: 0.110
#stealthchop_threshold: 0

## std fysetc motor
#run_current: 0.7
#hold_current: 0.2
#sense_resistor: 0.110
#stealthchop_threshold: 0

#####################################################################
# 	Bed Heater
#####################################################################

[heater_bed]
##	SSR Pin - BED_OUT
heater_pin: PA1
sensor_type: Generic 3950 # NTC 100K MGB18-104F39050L32
sensor_pin: PF3 #TB
##	Adjust Max Power so your heater doesn't warp your bed
max_power: 0.6
min_temp: 0
max_temp: 130
#min_temp: -250
#max_temp: 999999999


#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

#####################################################################
# 	CHAMBER THERMISTOR
#####################################################################
[temperature_sensor chamber]
sensor_type: Generic 3950 # NTC 100K beta 3950
sensor_pin: PF5 #T1
gcode_id: C


[neopixel sb_leds]
pin: EBBCan:gpio16
#   The pin connected to the neopixel. This parameter must be provided.
chain_count: 3
#   The number of Neopixel chips that are "daisy chained" to the
#   provided pin. The default is 1 (which indicates only a single
#   Neopixel is connected to the pin).
color_order: GRBW
#   Set the pixel order required by the LED hardware. Options are GRB,
#   RGB, GRBW, or RGBW. The default is GRB.
initial_RED: 1.0
initial_GREEN: 0.0
initial_BLUE: 1.0
initial_WHITE: 0.0


#####################################################################
# 	Probe moet dus weg met cartographer!
#####################################################################

# [probe] ## TAP Nu ik geen werkende tap meer heb, maar alleen maar een Z endstop... en de probe carto gaat worden... hmmm....
# pin: ~PC5

# x_offset: 0
# y_offset: 0
###z_offset: 0
#speed: 5 #10 # 50.0 # dit was 100, wordt het iets minder herrie als ik naar 50 doe?
#samples: 2
#samples_result: median
#sample_retract_dist: 3.0
#samples_tolerance: 0.01
#samples_tolerance_retries: 3

# activate_gcode:
##    {% set PROBE_TEMP = 150 %}
#    {% set PROBE_TEMP = 180 %}
#    {% set MAX_TEMP = PROBE_TEMP + 5 %}
#    {% set ACTUAL_TEMP = printer.extruder.temperature %}
#    {% set TARGET_TEMP = printer.extruder.target %}

#    {% if TARGET_TEMP > PROBE_TEMP %}
#        { action_respond_info('Extruder temperature target of %.1fC is too high, lowering to %.1fC' % (TARGET_TEMP, PROBE_TEMP)) }
#        M109 S{ PROBE_TEMP }
#    {% else %}
        # Temperature target is already low enough, but nozzle may still be too hot.
#        {% if ACTUAL_TEMP > MAX_TEMP %}
#            { action_respond_info('Extruder temperature %.1fC is still too high, waiting until below %.1fC' % (ACTUAL_TEMP, MAX_TEMP)) }
#            TEMPERATURE_WAIT SENSOR=extruder MAXIMUM={ MAX_TEMP }
#        {% endif %}
#    {% endif %}

#####################################################################
# 	Fan Control
#####################################################################

# PA3, HE1 heb ik gebruikt voor de kabels voor de NEVERMORE
#heater_pin: PA3 # HE1

#PB10, HE2 heb ik gebruikt voor de bed fans.
#heater_pin: PB10 # HE2


##	Print Cooling Fan - CNC_FAN0
# [fan]
# pin: PA8
# kick_start_time: 0.5
# off_below: 0.10

# [heater_fan hotend_fan]
##	Hotend Fan - CNC_FAN1
# pin: PE5
# max_power: 1.0
# kick_start_time: 0.5
# heater: extruder
# heater_temp: 50.0
##	If you are experiencing back flow, you can reduce fan_speed
#fan_speed: 1.0

[heater_fan controller_fan]
##	Controller fan - CNC_FAN2
pin: PD12
max_power: 0.5
shutdown_speed: 0.0
kick_start_time: 5.0
heater: heater_bed
heater_temp: 40


[heater_fan nevermore_fan]
pin: PA3
max_power: 1.0
shutdown_speed: 0.0
kick_start_time: 5.0
heater: heater_bed
heater_temp: 0


[heater_fan bed_fans]
pin: PB10
max_power: 1.0
shutdown_speed: 0.0
kick_start_time: 5.0
heater: heater_bed
heater_temp: 40


# PA3, HE1 heb ik gebruikt voor de kabels voor de NEVERMORE
#heater_pin: PA3 # HE1
#sensor_pin: PF5 # T1

#PB10, HE2 heb ik gebruikt voor de bed fans.
#heater_pin: PB10 # HE2
#sensor_pin: PF6 # T2



#[heater_fan exhaust_fan]
##	Exhaust fan - CNC_FAN3
#pin: PD13
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#heater: heater_bed
#heater_temp: 60
#fan_speed: 1.0


#[heater_fan fan4]
#pin: PD14

#[controller_fan fan5]
#pin: PD15



## https://docs.mainsail.xyz/overview/quicktips/additional-sensors

#####################################################################
# Add raspberry PI system temperature to the MainSail display
#####################################################################
[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 0
max_temp: 100

#####################################################################
# Add OCTOPUS MCU temperature to the MainSail display
#####################################################################

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100

[temperature_sensor cartographer]
sensor_type: temperature_mcu
sensor_mcu: cartographer

# https://www.teamfdm.com/forums/topic/496-extra-neopixel-led-string-next-to-stealthburner-leds-from-octopus-11-board/
# https://github.com/julianschill/klipper-led_effect
# https://github.com/claudermilk/TridentBackup/blob/master/leds.cfg

#####################################################################
# 	LED Control
#####################################################################
# color_order: GRBW # For single Logo LED
# #color_order: GRB, GRB, GRB, GRB, GRB, GRB, GRB, GRB, GRBW, GRBW # For PCB Logo
# #   Set the pixel order required by the LED hardware. Options are GRB,
# #   RGB, GRBW, or RGBW. The default is GRB.
# initial_RED: 0.0
# initial_GREEN: 0.0
# initial_BLUE: 0.0
# initial_WHITE: 0.0
# #   Sets the initial LED color of the Neopixel. Each value should be
# #   between 0.0 and 1.0. The WHITE option is only available on RGBW
# #   LEDs. The default for each color is 0.#
#

[neopixel chamber]
pin: PB6
chain_count:18
color_order: GRB #RGB
initial_RED: 1 #0 #0.988‬ #0
initial_GREEN: 0.875 # 0.0824 #0.875‬ # 0.0824
initial_BLUE: 1.0
initial_WHITE: 1.0

#[output_pin caselight]
# Chamber Lighting - HE1 Connector (Optional)
#pin: PA3
#pwm:true
#shutdown_value: 0
#value:1
#cycle_time: 0.01

#####################################################################
# 	Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 18000

# dit zet de verhitting van het bed uit, totdat bedscan heeft plaatsgevonden
[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
gcode:
    {% set TARGET_TEMP = printer.heater_bed.target %}
    M140 S0
    _BED_MESH_CALIBRATE {rawparams}
    M140 S{TARGET_TEMP}#



# dit moet weg voor sensorless
# [safe_z_home]
# home_xy_position:175, 175
# speed:500
# z_hop:10


#[gcode_macro QUAD_GANTRY_LEVEL]
#rename_existing: BASE_QUAD_GANTRY_LEVEL
#gcode:
    #G28 # or use a conditional or safe homing
#    _CG28 # my if then sensorless homing
#    BASE_QUAD_GANTRY_LEVEL horizontal_move_z=10 retry_tolerance=1.000
#    BASE_QUAD_GANTRY_LEVEL horizontal_move_z=3
#    G28 Z



[gcode_macro Cartographer_QGL] # safer and faster QGL for Cartographer
gcode:
    _CG28 # conditional homing
    QUAD_GANTRY_LEVEL horizontal_move_z=10 retries=0 retry_tolerance=1.000
    QUAD_GANTRY_LEVEL horizontal_move_z=3
    G28 Z
    
[quad_gantry_level]
gantry_corners:
  -30, 20
  380, 370
#	Probe points
points:
  40, 15
  40, 260
  300, 260
  300, 15

#points:
#  30, 0
#  30, 300
#  320, 300
#  320, 0
#--------------------------------------------------------------------

speed: 800
horizontal_move_z: 2 
#horizontal_move_z: 10
retries: 10
retry_tolerance: 0.0075 # 0.010 #0.005 #0.0075
max_adjust: 10


######################
# Bed Settings 350mm #
# zou bv in een bestand kunnen in submap: ./config/bed.cfg #
# die zou dan met #include ./config/bed.cfg toegevoegd kunnen worden hier #
######################

[bed_mesh]
zero_reference_position: 100, 70
#zero_reference_position: 175, 175
speed: 800
horizontal_move_z: 5

mesh_min: 30,30 # bij 20 - krijgt buiten boord 25 is net te ver naar voren... 
mesh_max: 320, 320 # als 340 bij 340 - krijg je empty clutters found - was eerst 300x300
mesh_pps: 2, 2
#mesh_pps: 2,2

# dit is mooi!
#faulty_region_1_min: 30, 90
#faulty_region_1_max: 320, 240

#faulty_region_1_min: 30, 80
#faulty_region_1_max: 320, 210
# 0.248

#faulty_region_1_min: 30, 125
#faulty_region_1_max: 320, 240
#0.243

#faulty_region_1_min: 30, 112
#faulty_region_1_max: 320, 240
#0.237

#faulty_region_1_min: 30, 104
#faulty_region_1_max: 320, 230
#0.246

#faulty_region_1_min: 30, 104
#faulty_region_1_max: 320, 200
#0.246


#fade_start: 0.6
#fade_end: 10.0
#probe_count: 80, 80
probe_count: 90,90
algorithm: bicubic # lagrange 

#zero_reference_position: 175, 175


# See the sample-lcd.cfg file for definitions of common LCD displays.

#[neopixel my_neopixel]
#pin: PB0



#####################################################################
# 	Macros
#####################################################################

[gcode_macro G32]
gcode:
    SAVE_GCODE_STATE NAME=STATE_G32
    G90
    G28
#    CLEAN_NOZZLE
    QUAD_GANTRY_LEVEL
#    G28

    G0 X175 Y175 Z10 F3600
    RESTORE_GCODE_STATE NAME=STATE_G32
    
    BED_MESH_CLEAR
    M106 S255  ## set fan speed max
    BED_MESH_PROFILE LOAD=default

    
[gcode_macro PRINT_START]
gcode: 
# Parameters
    {% set BED_TEMP = params.BED|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER|float %}

    M117 print start

    G90  
    STATUS_HOMING
    G28 ; homing
    QUAD_GANTRY_LEVEL
    
    STATUS_HEATING
    M117 Cartographer scanning bed...
    BED_MESH_CLEAR
    #BED_MESH_CALIBRATE #ADAPTIVE=1
    BED_MESH_CALIBRATE PROFILE=adaptive ADAPTIVE=1

    M117 heating...
    M190 S{BED_TEMP}            ; set and wait for bed to reach temp
    M109 S{EXTRUDER_TEMP}       ; set and wait for hot end to reach temp
    
   VORON_PURGE

   STATUS_PRINTING
   M117 Printing
    




[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-4.0 F3600                 ; retract filament
    G91                            ; relative positioning

    #   Get Boundaries
    {% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
    {% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
    {% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}

    #   Check end position to determine safe direction to move
    {% if printer.toolhead.position.x < (max_x - 20) %}
        {% set x_safe = 20.0 %}
    {% else %}
        {% set x_safe = -20.0 %}
    {% endif %}

    {% if printer.toolhead.position.y < (max_y - 20) %}
        {% set y_safe = 20.0 %}
    {% else %}
        {% set y_safe = -20.0 %}
    {% endif %}

    {% if printer.toolhead.position.z < (max_z - 2) %}
        {% set z_safe = 2.0 %}
    {% else %}
        {% set z_safe = max_z - printer.toolhead.position.z %}
    {% endif %}

    G0 Z{z_safe} F3600             ; move nozzle up
    G0 X{x_safe} Y{y_safe} F20000  ; move nozzle to remove stringing
    TURN_OFF_HEATERS
    M107                           ; turn off fan
    G90                            ; absolute positioning
    G0 X60 Y{max_y-15} F3600          ; park nozzle at rear- come to the front (y direction 15)
    
    M117 Printing finished




# Home, get position, throw around toolhead, home again.
# If MCU stepper positions (first line in GET_POSITION) are greater than a full step different (your number of microsteps), then skipping occured.
# We only measure to a full step to accomodate for endstop variance.
# Example: TEST_SPEED SPEED=300 ACCEL=5000 ITERATIONS=10

[gcode_macro TEST_SPEED]
gcode:
    # Speed
    {% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
    # Iterations
    {% set iterations = params.ITERATIONS|default(5)|int %}
    # Acceleration
    {% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
    # Bounding inset for large pattern (helps prevent slamming the toolhead into the sides after small skips, and helps to account for machines with imperfectly set dimensions)
    {% set bound = params.BOUND|default(20)|int %}
    # Size for small pattern box
    {% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
    
    # Large pattern
        # Max positions, inset by BOUND
        {% set x_min = printer.toolhead.axis_minimum.x + bound %}
        {% set x_max = printer.toolhead.axis_maximum.x - bound %}
        {% set y_min = printer.toolhead.axis_minimum.y + bound %}
        {% set y_max = printer.toolhead.axis_maximum.y - bound %}
    
    # Small pattern at center
        # Find X/Y center point
        {% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
        {% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
        
        # Set small pattern box around center point
        {% set x_center_min = x_center - (smallpatternsize/2) %}
        {% set x_center_max = x_center + (smallpatternsize/2) %}
        {% set y_center_min = y_center - (smallpatternsize/2) %}
        {% set y_center_max = y_center + (smallpatternsize/2) %}

    # Save current gcode state (absolute/relative, etc)
    SAVE_GCODE_STATE NAME=TEST_SPEED
    
    # Output parameters to g-code terminal
    { action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
    
    # Home and get position for comparison later:
        M400 # Finish moves - https://github.com/AndrewEllis93/Print-Tuning-Guide/issues/66
        G28
        # QGL if not already QGLd (only if QGL section exists in config)
        {% if printer.configfile.settings.quad_gantry_level %}
            {% if printer.quad_gantry_level.applied == False %}
                QUAD_GANTRY_LEVEL
                G28 Z
            {% endif %}
        {% endif %} 
        # Move 50mm away from max position and home again (to help with hall effect endstop accuracy - https://github.com/AndrewEllis93/Print-Tuning-Guide/issues/24)
        G90
        G1 X{printer.toolhead.axis_maximum.x-50} Y{printer.toolhead.axis_maximum.y-50} F{30*60}
        M400 # Finish moves - https://github.com/AndrewEllis93/Print-Tuning-Guide/issues/66
        G28 X Y
        G90 # deze heb ik toegevoegd op aanraden van... https://github.com/AndrewEllis93/Print-Tuning-Guide/issues/66#issuecomment-1598712794
        G0 X{printer.toolhead.axis_maximum.x-1} Y{printer.toolhead.axis_maximum.y-1} F{30*60}
        G4 P1000 
        GET_POSITION

    # Go to starting position
    G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}

    # Set new limits
    SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} # ACCEL_TO_DECEL={accel / 2}

    {% for i in range(iterations) %}
        # Large pattern diagonals
        G0 X{x_min} Y{y_min} F{speed*60}
        G0 X{x_max} Y{y_max} F{speed*60}
        G0 X{x_min} Y{y_min} F{speed*60}
        G0 X{x_max} Y{y_min} F{speed*60}
        G0 X{x_min} Y{y_max} F{speed*60}
        G0 X{x_max} Y{y_min} F{speed*60}
        
        # Large pattern box
        G0 X{x_min} Y{y_min} F{speed*60}
        G0 X{x_min} Y{y_max} F{speed*60}
        G0 X{x_max} Y{y_max} F{speed*60}
        G0 X{x_max} Y{y_min} F{speed*60}
    
        # Small pattern diagonals
        G0 X{x_center_min} Y{y_center_min} F{speed*60}
        G0 X{x_center_max} Y{y_center_max} F{speed*60}
        G0 X{x_center_min} Y{y_center_min} F{speed*60}
        G0 X{x_center_max} Y{y_center_min} F{speed*60}
        G0 X{x_center_min} Y{y_center_max} F{speed*60}
        G0 X{x_center_max} Y{y_center_min} F{speed*60}
        
        # Small patternbox
        G0 X{x_center_min} Y{y_center_min} F{speed*60}
        G0 X{x_center_min} Y{y_center_max} F{speed*60}
        G0 X{x_center_max} Y{y_center_max} F{speed*60}
        G0 X{x_center_max} Y{y_center_min} F{speed*60}
    {% endfor %}

    # Restore max speed/accel/accel_to_decel to their configured values
    SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} # ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel} 

    # Re-home and get position again for comparison:
        M400 # Finish moves - https://github.com/AndrewEllis93/Print-Tuning-Guide/issues/66
        G28 # This is a full G28 to fix an issue with CoreXZ - https://github.com/AndrewEllis93/Print-Tuning-Guide/issues/12
        # Go to XY home positions (in case your homing override leaves it elsewhere)
        G90
        G0 X{printer.toolhead.axis_maximum.x-1} Y{printer.toolhead.axis_maximum.y-1} F{30*60}
        G4 P1000 
        GET_POSITION

    # Restore previous gcode state (absolute/relative, etc)
    RESTORE_GCODE_STATE NAME=TEST_SPEED





[gcode_macro CHAMBER_LED_ON]
gcode:
  SET_LED LED=chamber RED=1 GREEN=1 BLUE=1
  # SET_LED LED=chamber RED=253 GREEN=224 BLUE=255
[gcode_macro CHAMBER_LED_OFF]
gcode:
  SET_LED LED=chamber RED=0 GREEN=0 BLUE=0


# M600: Filament Change. This macro will pause the printer, move the
# tool to the change position, and retract the filament 50mm. Adjust
# the retraction settings for your own extruder. After filament has
# been changed, the print can be resumed from its previous position
# with the "RESUME" gcode.

[pause_resume]

[gcode_macro M600]
gcode:
  {% set X = params.X|default(50)|float %}
  {% set Y = params.Y|default(0)|float %}
  {% set Z = params.Z|default(10)|float %}
  SAVE_GCODE_STATE NAME=M600_state
  PAUSE
  G91
  G1 E-.8 F2700
  G1 Z{Z}
  G90
  G1 X{X} Y{Y} F3000
  G91
  G1 E-50 F1000
  RESTORE_GCODE_STATE NAME=M600_state




# CARTOGRAPHER TEMPERATRUE DIFFERENTIAL MACRO

[gcode_macro DATA_SAMPLE]
gcode:
  G90
  M106 S255
  M117 Waiting for Coil to cool to 40
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MAXIMUM=40
  M117 Starting Phase 1 of 4
  M106 S0
  G28
  G0 Z1
  M104 S250
  M140 S110
  G4 P1000
  CARTOGRAPHER_STREAM FILENAME=data1
  M117 Waiting for Coil to heat to 70
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MINIMUM=70
  CARTOGRAPHER_STREAM FILENAME=data1
  M104 S0
  M140 S0
  M106 S255
  G0 Z80
  M117 Waiting for Coil to cool to 40
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MAXIMUM=40
  M117 Starting Phase 2 of 4
  M106 S0
  G28 Z0
  G0 Z2
  M104 S250
  M140 S110
  G4 P1000
  CARTOGRAPHER_STREAM FILENAME=data2
  M117 Waiting for Coil to heat to 70
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MINIMUM=70
  CARTOGRAPHER_STREAM FILENAME=data2
  M104 S0
  M140 S0
  M106 S255
  G0 Z80
  M117 Waiting for Coil to cool to 40
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MAXIMUM=40
  M117 "Starting Phase 3 of 4"
  M106 S0
  G28 Z0
  G0 Z3
  M104 S250
  M140 S110
  G4 P1000
  CARTOGRAPHER_STREAM FILENAME=data3
  M117 Waiting for Coil to heat to 70
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MINIMUM=70
  CARTOGRAPHER_STREAM FILENAME=data3
  M104 S0
  M140 S0
  M106 S255
  G0 Z80
  M117 Waiting for Coil to cool to 40
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MAXIMUM=40
  M117 "Starting Phase 4 of 4"
  M106 S0
  G28 Z0
  G0 Z5
  M104 S250
  M140 S110
  G4 P1000
  CARTOGRAPHER_STREAM FILENAME=data4
  M117 Waiting for Coil to heat to 70
  TEMPERATURE_WAIT SENSOR='temperature_sensor cartographer_coil' MINIMUM=70
  CARTOGRAPHER_STREAM FILENAME=data4
  M104 S0
  M140 S0
  M117 "Testing complete, please move files using: mv ~/klipper/data1 ~/klipper/data2 ~/klipper/data3 ~/klipper/data4 ~/cartographer-klipper/"
  M117 "Follow the remaining instructions here: https://docs.cartographer3d.com/cartographer-probe/advanced-features/temperature-differential-calibration-beta"





##  https://github.com/Klipper3d/klipper/blob/master/docs/Axis_Twist_Compensation.md

[axis_twist_compensation]
#speed: 50
#   The speed (in mm/s) of non-probing moves during the calibration.
#   The default is 50.
#horizontal_move_z: 5
#   The height (in mm) that the head should be commanded to move to
#   just prior to starting a probe operation. The default is 5.
calibrate_start_x: 10
#   Defines the minimum X coordinate of the calibration
#   This should be the X coordinate that positions the nozzle at the starting
#   calibration position. This parameter must be provided.
calibrate_end_x: 320
#   Defines the maximum X coordinate of the calibration
#   This should be the X coordinate that positions the nozzle at the ending
#   calibration position. This parameter must be provided.
calibrate_y: 200
#   Defines the Y coordinate of the calibration
#   This should be the Y coordinate that positions the nozzle during the
#   calibration process. This parameter must be provided and is recommended to
#   be near the center of the bed







#[auto_speed]
#axis: diag_x, diag_y  ; One or multiple of `x`, `y`, `diag_x`, `diag_y`, `z`

#margin: 20            ; How far away from your axes to perform movements

#settling_home: 1      ; Perform settling home before starting Auto Speed
####max_missed: 10.0       ; Maximum full steps that can be missed
#endstop_samples: 3    ; How many endstop samples to take for endstop variance

#accel_min: 1000.0     ; Minimum acceleration test may try
#accel_max: 50000.0    ; Maximum acceleration test may try
#accel_accu: 0.05      ; Keep binary searching until the result is within this percentage

#velocity_min: 50.0    ; Minimum velocity test may try
#velocity_max: 5000.0  ; Maximum velocity test may try
#velocity_accu: 0.05   ; Keep binary searching until the result is within this percentage

#derate: 0.8           ; Derate discovered results by this amount

#validate_margin: Unset      ; Margin for VALIDATE, Defaults to margin
#validate_inner_margin: 20.0 ; Margin for VALIDATE inner pattern
#validate_iterations: 50     ; Perform VALIDATE pattern this many times

#results_dir: ~/printer_data/config ; Destination directory for graphs

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 37.675
#*# pid_ki = 1.202
#*# pid_kd = 295.279
#*#
#*# [cartographer model default]
#*# model_coef = 1.4407585418421862,
#*# 	  1.8644611040428338,
#*# 	  0.7485792990990123,
#*# 	  0.3055247973321135,
#*# 	  0.3361443888027324,
#*# 	  0.4969113493837415,
#*# 	  -0.1667704199144691,
#*# 	  -0.4874435893228085,
#*# 	  0.19225824940911299,
#*# 	  0.2731716162495927
#*# model_domain = 3.2937204539438314e-07,3.390799401355525e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 48.090960
#*# model_offset = 0.21500
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.090278, -0.096310, -0.097894, -0.080062, -0.047408, -0.079419, -0.073097, -0.036669, -0.052299, -0.043707, -0.050767, -0.023290, -0.031857, -0.033161, -0.030920, -0.015222, -0.022944, -0.029571, -0.024346, -0.001839, -0.010018, -0.018885, -0.028072, -0.010268, -0.011541, -0.026283, -0.039226, -0.015936, -0.026791, -0.038162, -0.056786, -0.054496, -0.050088, -0.071785, -0.090053, -0.091966, -0.095403, -0.105252, -0.113848, -0.125033
#*# 	-0.103544, -0.096901, -0.089781, -0.078104, -0.074057, -0.079083, -0.062845, -0.053483, -0.041910, -0.059869, -0.034371, -0.031570, -0.022479, -0.036129, -0.021842, -0.020654, -0.008224, -0.017988, -0.030777, -0.012027, -0.002963, -0.015420, -0.029275, -0.020353, -0.009023, -0.027655, -0.038469, -0.031190, -0.034681, -0.029048, -0.057239, -0.058391, -0.062292, -0.059990, -0.090892, -0.102260, -0.111117, -0.093106, -0.111870, -0.122281
#*# 	-0.103187, -0.097890, -0.083427, -0.073745, -0.073492, -0.061536, -0.058320, -0.049672, -0.060010, -0.043091, -0.034091, -0.027185, -0.036198, -0.019578, -0.021342, -0.020489, -0.013720, -0.012919, -0.005859, -0.011444, -0.013299, -0.013496, -0.004600, -0.017963, -0.018362, -0.025043, -0.012637, -0.031003, -0.032591, -0.042981, -0.037312, -0.056310, -0.062162, -0.081899, -0.078926, -0.085247, -0.084931, -0.104497, -0.111130, -0.119921
#*# 	-0.099794, -0.093907, -0.074522, -0.076383, -0.069912, -0.056992, -0.045920, -0.057640, -0.045002, -0.032680, -0.029997, -0.037362, -0.018816, -0.020645, -0.017545, -0.015800, -0.015113, -0.011524, -0.014096, -0.012527, -0.014989, -0.015843, -0.005661, -0.026837, -0.022379, -0.024279, -0.019466, -0.031230, -0.038271, -0.044347, -0.039966, -0.056961, -0.062600, -0.073743, -0.069753, -0.095713, -0.099737, -0.109586, -0.117773, -0.126903
#*# 	-0.094021, -0.087373, -0.082547, -0.065564, -0.066925, -0.053197, -0.059640, -0.037579, -0.027260, -0.027361, -0.033440, -0.026358, -0.002981, -0.011177, -0.018131, -0.023834, -0.008621, -0.008258, -0.010474, -0.009026, -0.009437, -0.013479, -0.013396, -0.017674, -0.013530, -0.024776, -0.029303, -0.034451, -0.032094, -0.044271, -0.054439, -0.056872, -0.054194, -0.074176, -0.084502, -0.100959, -0.098959, -0.109683, -0.119693, -0.126855
#*# 	-0.086780, -0.080047, -0.069112, -0.058772, -0.055479, -0.053375, -0.039367, -0.029097, -0.017095, -0.025267, -0.013820, -0.010738, 0.002179, -0.012179, 0.000058, 0.000560, 0.008149, -0.009827, -0.002490, -0.000124, 0.005934, -0.004901, -0.009738, -0.014019, -0.007719, -0.021500, -0.034527, -0.029995, -0.023239, -0.035910, -0.053840, -0.047556, -0.047573, -0.065228, -0.086148, -0.095019, -0.093833, -0.091664, -0.103638, -0.122589
#*# 	-0.083993, -0.075997, -0.065312, -0.056976, -0.055310, -0.035420, -0.036850, -0.027112, -0.031343, -0.009089, -0.014868, -0.012782, -0.014034, 0.006922, 0.012935, 0.003668, -0.004762, 0.011332, 0.011723, 0.003070, -0.009914, 0.005081, 0.001869, -0.010273, -0.019661, -0.011936, -0.017863, -0.026358, -0.037135, -0.043932, -0.035531, -0.048703, -0.058427, -0.072772, -0.071053, -0.077491, -0.091588, -0.104740, -0.110511, -0.127935
#*# 	-0.081481, -0.073801, -0.060264, -0.059409, -0.049217, -0.037007, -0.028266, -0.030039, -0.033405, -0.014572, -0.005870, -0.007162, -0.011443, 0.001482, 0.013694, 0.005647, -0.003980, 0.006284, 0.011907, 0.016693, -0.004522, 0.001472, 0.006454, 0.000251, -0.023297, -0.026144, -0.012616, -0.014102, -0.036075, -0.037219, -0.028761, -0.034775, -0.066182, -0.071360, -0.070854, -0.072100, -0.089372, -0.110564, -0.110956, -0.124056
#*# 	-0.077651, -0.068913, -0.057894, -0.039350, -0.040893, -0.038698, -0.031086, -0.007418, -0.005850, -0.007176, -0.010323, 0.002222, 0.013071, 0.008051, 0.001028, 0.013013, 0.020272, 0.015254, 0.006646, 0.016325, 0.022611, 0.010231, 0.001892, 0.001124, 0.004801, -0.008222, -0.017463, -0.020717, -0.008792, -0.011815, -0.030910, -0.038281, -0.039160, -0.051813, -0.065759, -0.076492, -0.080221, -0.088179, -0.103721, -0.115574
#*# 	-0.069029, -0.058167, -0.048202, -0.040443, -0.033616, -0.025965, -0.023917, -0.007585, -0.003213, 0.002842, -0.003248, 0.009541, 0.019906, 0.014979, 0.009927, 0.020362, 0.029544, 0.022367, 0.015569, 0.023687, 0.029029, 0.017357, 0.002805, 0.007782, 0.010149, -0.002152, -0.014446, -0.008523, -0.003478, -0.016901, -0.028491, -0.030867, -0.027912, -0.046231, -0.062899, -0.078248, -0.077957, -0.078360, -0.099695, -0.111514
#*# 	-0.079861, -0.069569, -0.057284, -0.051722, -0.042403, -0.024883, -0.022846, -0.019765, -0.025116, 0.003027, 0.001112, 0.000711, -0.007407, 0.006852, 0.017187, 0.011811, 0.007945, 0.009866, 0.022673, 0.015875, 0.009851, 0.010503, 0.008504, 0.001598, -0.005504, -0.010409, -0.013043, -0.017558, -0.023358, -0.029126, -0.033669, -0.041471, -0.048793, -0.058138, -0.062174, -0.076315, -0.089154, -0.102405, -0.107384, -0.125950
#*# 	-0.104423, -0.094387, -0.083401, -0.078019, -0.071162, -0.063137, -0.052813, -0.049065, -0.045616, -0.036432, -0.024703, -0.026948, -0.026491, -0.021264, -0.012957, -0.015439, -0.011818, -0.007812, -0.006197, -0.006178, -0.008064, -0.014739, -0.018516, -0.025931, -0.040913, -0.040510, -0.043342, -0.047544, -0.060799, -0.057176, -0.067294, -0.073378, -0.089066, -0.086956, -0.093146, -0.098935, -0.114301, -0.122799, -0.132222, -0.144780
#*# 	-0.135339, -0.133084, -0.115819, -0.108145, -0.100087, -0.092093, -0.091875, -0.070917, -0.074183, -0.063692, -0.067501, -0.054363, -0.053776, -0.048666, -0.051593, -0.041237, -0.036153, -0.035019, -0.039371, -0.030632, -0.033412, -0.039602, -0.046758, -0.054531, -0.061060, -0.070632, -0.075195, -0.081074, -0.085727, -0.090584, -0.097248, -0.103636, -0.106635, -0.116642, -0.126889, -0.140121, -0.142745, -0.153291, -0.162752, -0.171106
#*# 	-0.151892, -0.111816, -0.109257, -0.106480, -0.101540, -0.097633, -0.093881, -0.090006, -0.088835, -0.083264, -0.081050, -0.079728, -0.078730, -0.077522, -0.076419, -0.073109, -0.073156, -0.073958, -0.073722, -0.072092, -0.074116, -0.076212, -0.077767, -0.078305, -0.082203, -0.085736, -0.087959, -0.088781, -0.091999, -0.095723, -0.099001, -0.100420, -0.104159, -0.109757, -0.111786, -0.117029, -0.119491, -0.125111, -0.130238, -0.190887
#*# 	-0.159739, -0.146349, -0.140957, -0.136967, -0.131185, -0.126707, -0.122351, -0.118407, -0.116881, -0.111129, -0.108341, -0.107037, -0.105760, -0.104418, -0.103036, -0.099672, -0.099548, -0.100190, -0.099663, -0.097966, -0.099659, -0.101421, -0.102624, -0.102673, -0.106177, -0.109343, -0.111317, -0.111712, -0.114508, -0.117890, -0.120784, -0.121664, -0.124802, -0.129720, -0.130905, -0.134771, -0.135844, -0.138614, -0.138011, -0.201894
#*# 	-0.167361, -0.118157, -0.116716, -0.114414, -0.109770, -0.106102, -0.102370, -0.099063, -0.097812, -0.092433, -0.090082, -0.089136, -0.088146, -0.087067, -0.085864, -0.082791, -0.082994, -0.083851, -0.083487, -0.082077, -0.084064, -0.086023, -0.087398, -0.087712, -0.091506, -0.094840, -0.096979, -0.097639, -0.100793, -0.104459, -0.107614, -0.108867, -0.112594, -0.118017, -0.119769, -0.124714, -0.127115, -0.132473, -0.137342, -0.203591
#*# 	-0.168343, -0.144433, -0.138985, -0.135035, -0.129297, -0.124852, -0.120521, -0.116617, -0.115099, -0.109383, -0.106606, -0.105323, -0.104055, -0.102726, -0.101350, -0.098012, -0.097897, -0.098541, -0.098015, -0.096337, -0.098024, -0.099778, -0.100974, -0.101021, -0.104511, -0.107662, -0.109631, -0.110027, -0.112817, -0.116191, -0.119080, -0.119967, -0.123110, -0.128025, -0.129230, -0.133118, -0.134259, -0.137138, -0.136807, -0.197075
#*# 	-0.164523, -0.117445, -0.115855, -0.113494, -0.108835, -0.105160, -0.101429, -0.098127, -0.096872, -0.091514, -0.089169, -0.088223, -0.087234, -0.086156, -0.084956, -0.081897, -0.082096, -0.082945, -0.082581, -0.081176, -0.083149, -0.085095, -0.086461, -0.086770, -0.090541, -0.093854, -0.095980, -0.096635, -0.099768, -0.103412, -0.106547, -0.107792, -0.111495, -0.116885, -0.118626, -0.123538, -0.125920, -0.131236, -0.135877, -0.187254
#*# 	-0.156373, -0.135736, -0.130383, -0.126470, -0.120778, -0.116369, -0.112074, -0.108202, -0.106698, -0.101026, -0.098274, -0.097006, -0.095754, -0.094440, -0.093080, -0.089772, -0.089666, -0.090315, -0.089802, -0.088146, -0.089834, -0.091588, -0.092790, -0.092853, -0.096337, -0.099487, -0.101465, -0.101885, -0.104687, -0.108076, -0.110989, -0.111923, -0.115113, -0.120083, -0.121399, -0.125430, -0.126823, -0.130130, -0.130738, -0.179262
#*# 	-0.154477, -0.113906, -0.111821, -0.109237, -0.104474, -0.100736, -0.096971, -0.093647, -0.092365, -0.087020, -0.084669, -0.083711, -0.082713, -0.081629, -0.080427, -0.077381, -0.077568, -0.078402, -0.078034, -0.076633, -0.078585, -0.080510, -0.081860, -0.082162, -0.085898, -0.089183, -0.091288, -0.091935, -0.095040, -0.098653, -0.101762, -0.102994, -0.106665, -0.112012, -0.113739, -0.118611, -0.120976, -0.126251, -0.130798, -0.176520
#*# 	-0.160800, -0.137515, -0.132181, -0.128304, -0.122666, -0.118300, -0.114045, -0.110211, -0.108720, -0.103101, -0.100376, -0.099119, -0.097878, -0.096576, -0.095227, -0.091950, -0.091845, -0.092485, -0.091976, -0.090334, -0.092004, -0.093740, -0.094928, -0.094988, -0.098435, -0.101551, -0.103506, -0.103916, -0.106686, -0.110034, -0.112910, -0.113824, -0.116968, -0.121871, -0.123148, -0.127101, -0.128420, -0.131591, -0.131974, -0.182700
#*# 	-0.164441, -0.118147, -0.116596, -0.114286, -0.109720, -0.106117, -0.102459, -0.099221, -0.097990, -0.092735, -0.090434, -0.089506, -0.088535, -0.087477, -0.086300, -0.083299, -0.083492, -0.084324, -0.083966, -0.082587, -0.084520, -0.086428, -0.087766, -0.088068, -0.091764, -0.095013, -0.097096, -0.097737, -0.100807, -0.104378, -0.107451, -0.108669, -0.112295, -0.117577, -0.119281, -0.124087, -0.126414, -0.131604, -0.136200, -0.192883
#*# 	-0.168842, -0.142561, -0.137331, -0.133541, -0.128004, -0.123712, -0.119527, -0.115755, -0.114288, -0.108754, -0.106070, -0.104833, -0.103611, -0.102328, -0.100997, -0.097766, -0.097661, -0.098290, -0.097785, -0.096165, -0.097806, -0.099513, -0.100678, -0.100731, -0.104122, -0.107184, -0.109100, -0.109493, -0.112208, -0.115491, -0.118304, -0.119178, -0.122244, -0.127032, -0.128231, -0.132042, -0.133211, -0.136109, -0.136025, -0.191704
#*# 	-0.163938, -0.119437, -0.117839, -0.115538, -0.111037, -0.107487, -0.103888, -0.100703, -0.099488, -0.094327, -0.092064, -0.091149, -0.090193, -0.089152, -0.087993, -0.085045, -0.085232, -0.086045, -0.085691, -0.084335, -0.086229, -0.088098, -0.089409, -0.089703, -0.093325, -0.096511, -0.098553, -0.099178, -0.102185, -0.105685, -0.108695, -0.109884, -0.113432, -0.118605, -0.120266, -0.124962, -0.127219, -0.132259, -0.136551, -0.182368
#*# 	-0.148705, -0.126425, -0.121444, -0.117786, -0.112414, -0.108250, -0.104187, -0.100528, -0.099109, -0.093728, -0.091127, -0.089936, -0.088759, -0.087523, -0.086239, -0.083106, -0.083022, -0.083653, -0.083179, -0.081621, -0.083245, -0.084933, -0.086096, -0.086179, -0.089519, -0.092543, -0.094454, -0.094887, -0.097593, -0.100862, -0.103688, -0.104642, -0.107760, -0.112593, -0.113988, -0.118022, -0.119655, -0.123326, -0.125029, -0.157712
#*# 	-0.117842, -0.103142, -0.099267, -0.095938, -0.090954, -0.087111, -0.083346, -0.080056, -0.078716, -0.073606, -0.071313, -0.070341, -0.069343, -0.068275, -0.067101, -0.064209, -0.064344, -0.065091, -0.064716, -0.063377, -0.065175, -0.066954, -0.068196, -0.068459, -0.071932, -0.074989, -0.076944, -0.077533, -0.080418, -0.083783, -0.086677, -0.087815, -0.091227, -0.096210, -0.097814, -0.102338, -0.104524, -0.109394, -0.113306, -0.135612
#*# 	-0.099153, -0.102932, -0.098396, -0.094866, -0.089750, -0.085791, -0.081938, -0.078478, -0.077130, -0.072043, -0.069591, -0.068474, -0.067371, -0.066213, -0.065009, -0.062062, -0.062000, -0.062616, -0.062186, -0.060737, -0.062299, -0.063926, -0.065057, -0.065173, -0.068374, -0.071280, -0.073139, -0.073609, -0.076239, -0.079415, -0.082187, -0.083212, -0.086316, -0.091087, -0.092677, -0.096874, -0.099006, -0.103489, -0.107212, -0.112504
#*# 	-0.094651, -0.093176, -0.088691, -0.085186, -0.080376, -0.076699, -0.073146, -0.070060, -0.068766, -0.064062, -0.061927, -0.061002, -0.060063, -0.059063, -0.057969, -0.055318, -0.055418, -0.056080, -0.055725, -0.054494, -0.056114, -0.057722, -0.058844, -0.059076, -0.062225, -0.065004, -0.066779, -0.067312, -0.069930, -0.072990, -0.075626, -0.076666, -0.079770, -0.084314, -0.085800, -0.089934, -0.091978, -0.096478, -0.100029, -0.104237
#*# 	-0.093890, -0.099591, -0.095809, -0.092846, -0.088638, -0.085388, -0.082234, -0.079419, -0.078298, -0.074150, -0.072157, -0.071252, -0.070358, -0.069418, -0.068431, -0.066035, -0.065992, -0.066499, -0.066149, -0.064977, -0.066259, -0.067593, -0.068519, -0.068625, -0.071244, -0.073622, -0.075141, -0.075531, -0.077681, -0.080278, -0.082541, -0.083384, -0.085920, -0.089813, -0.091119, -0.094538, -0.096283, -0.099931, -0.102941, -0.107669
#*# 	-0.098762, -0.090557, -0.079631, -0.071500, -0.059663, -0.050601, -0.041763, -0.033819, -0.030854, -0.019096, -0.013597, -0.011117, -0.008633, -0.006035, -0.003360, 0.003377, 0.003318, 0.001799, 0.002724, 0.005972, 0.002147, -0.001669, -0.004347, -0.004691, -0.012292, -0.019002, -0.023311, -0.024479, -0.030814, -0.038237, -0.044679, -0.047114, -0.054644, -0.065812, -0.069288, -0.079501, -0.084380, -0.095500, -0.104136, -0.117208
#*# 	-0.104135, -0.095516, -0.086266, -0.078244, -0.066334, -0.054694, -0.047472, -0.040160, -0.036367, -0.024299, -0.021625, -0.018093, -0.012487, -0.008142, -0.005188, -0.003908, -0.002945, -0.000172, -0.003427, -0.004858, -0.004630, -0.006126, -0.009433, -0.015416, -0.020796, -0.025041, -0.030923, -0.034975, -0.040495, -0.043084, -0.050391, -0.058054, -0.063539, -0.071462, -0.078022, -0.086747, -0.096016, -0.105797, -0.114944, -0.125892
#*# 	-0.111003, -0.103049, -0.094411, -0.083570, -0.073763, -0.063624, -0.054407, -0.047239, -0.042013, -0.033938, -0.028787, -0.021517, -0.018813, -0.014993, -0.015058, -0.012976, -0.013020, -0.012202, -0.014463, -0.011044, -0.016771, -0.022022, -0.022571, -0.020162, -0.032113, -0.038728, -0.041075, -0.045616, -0.051859, -0.060897, -0.063070, -0.070678, -0.075431, -0.083687, -0.089407, -0.099796, -0.105224, -0.115386, -0.124678, -0.133569
#*# 	-0.116236, -0.109681, -0.097424, -0.092955, -0.083438, -0.067059, -0.059659, -0.051061, -0.045666, -0.041166, -0.032704, -0.026033, -0.023137, -0.020573, -0.018506, -0.017438, -0.016407, -0.019681, -0.019005, -0.021196, -0.022503, -0.024112, -0.029003, -0.032586, -0.039146, -0.041789, -0.047258, -0.051929, -0.055627, -0.064319, -0.068740, -0.070458, -0.078010, -0.080995, -0.089546, -0.098195, -0.102993, -0.110130, -0.119816, -0.131277
#*# 	-0.114991, -0.106842, -0.096086, -0.086288, -0.078666, -0.068811, -0.059247, -0.054197, -0.047171, -0.039981, -0.032978, -0.027650, -0.024636, -0.021693, -0.020411, -0.017714, -0.017631, -0.015490, -0.020652, -0.019608, -0.024001, -0.024886, -0.029277, -0.033936, -0.037089, -0.037601, -0.045354, -0.049670, -0.054339, -0.060896, -0.065434, -0.070497, -0.074001, -0.080073, -0.081454, -0.094949, -0.100366, -0.103599, -0.114881, -0.127187
#*# 	-0.116019, -0.105789, -0.092796, -0.087162, -0.077612, -0.064948, -0.059238, -0.050448, -0.046401, -0.037001, -0.033757, -0.029314, -0.022634, -0.020465, -0.018175, -0.014099, -0.013334, -0.015340, -0.017015, -0.020383, -0.022313, -0.028347, -0.029339, -0.034221, -0.037949, -0.039768, -0.044932, -0.049924, -0.054879, -0.058718, -0.064091, -0.067875, -0.070167, -0.075370, -0.079937, -0.089596, -0.097507, -0.104076, -0.115035, -0.123445
#*# 	-0.120067, -0.110581, -0.098551, -0.090844, -0.084107, -0.072390, -0.065917, -0.055184, -0.048954, -0.039070, -0.034556, -0.030956, -0.028148, -0.027536, -0.028212, -0.025796, -0.024596, -0.020272, -0.017508, -0.015702, -0.017714, -0.021959, -0.027065, -0.031281, -0.037119, -0.040672, -0.046192, -0.054947, -0.053945, -0.061137, -0.065785, -0.067120, -0.070516, -0.076194, -0.081457, -0.092592, -0.097482, -0.102865, -0.113115, -0.127686
#*# 	-0.126811, -0.118338, -0.109033, -0.100414, -0.092904, -0.079035, -0.070366, -0.063632, -0.055509, -0.043029, -0.037147, -0.031193, -0.029052, -0.025408, -0.023911, -0.022961, -0.020869, -0.024630, -0.023758, -0.024465, -0.023519, -0.025690, -0.027081, -0.030928, -0.032384, -0.037420, -0.042188, -0.046174, -0.050586, -0.056883, -0.060961, -0.064343, -0.069124, -0.075104, -0.084969, -0.095908, -0.103371, -0.110713, -0.112524, -0.124606
#*# 	-0.134948, -0.126778, -0.120558, -0.110882, -0.102336, -0.086863, -0.080822, -0.069618, -0.060238, -0.051390, -0.044255, -0.037378, -0.034466, -0.027802, -0.027805, -0.025192, -0.024508, -0.023915, -0.023968, -0.026644, -0.030259, -0.033208, -0.033181, -0.033529, -0.037051, -0.041205, -0.043149, -0.050830, -0.053554, -0.061776, -0.063159, -0.068852, -0.072464, -0.080242, -0.085836, -0.092507, -0.098066, -0.106992, -0.114944, -0.126288
#*# 	-0.136088, -0.127029, -0.117967, -0.105789, -0.100867, -0.086781, -0.079045, -0.067231, -0.056330, -0.045341, -0.041443, -0.034143, -0.030414, -0.025947, -0.024883, -0.022608, -0.019644, -0.020799, -0.020209, -0.022699, -0.022340, -0.023573, -0.026714, -0.025419, -0.036076, -0.036089, -0.040993, -0.044162, -0.048247, -0.053109, -0.058049, -0.062343, -0.069062, -0.072413, -0.080203, -0.088451, -0.093864, -0.106235, -0.116902, -0.126454
#*# 	-0.124111, -0.116130, -0.109607, -0.100535, -0.090803, -0.077968, -0.064388, -0.059450, -0.044562, -0.028944, -0.028762, -0.022326, -0.021792, -0.015543, -0.013915, -0.011101, -0.010218, -0.007606, -0.010527, -0.008664, -0.009976, -0.011288, -0.011861, -0.017531, -0.019028, -0.021671, -0.029098, -0.033782, -0.035660, -0.034188, -0.040577, -0.047799, -0.052862, -0.059156, -0.066041, -0.077696, -0.084174, -0.090513, -0.105723, -0.119879
#*# x_count = 40
#*# y_count = 40
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 320.0
#*# min_y = 30.0
#*# max_y = 320.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 19.219
#*# pid_ki = 0.909
#*# pid_kd = 101.616
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 56.0
#*# shaper_type_y = mzv
#*# shaper_freq_y = 39.0
